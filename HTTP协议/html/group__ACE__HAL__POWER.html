<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACS: Power Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ACS
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__ACE__HAL__POWER.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Power Management<div class="ingroups"><a class="el" href="group__HAL.html">HAL</a> &raquo; <a class="el" href="group__HAL__API.html">API Definitions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>HAL API for low level power management.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Power Management:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__ACE__HAL__POWER.png" border="0" alt="" usemap="#group____ACE____HAL____POWER"/>
<map name="group____ACE____HAL____POWER" id="group____ACE____HAL____POWER">
<area shape="rect" id="node2" href="group__ACE__HAL__POWER__DS.html" title="Data Structures and\l Enums" alt="" coords="351,5,489,47"/>
<area shape="rect" id="node3" href="group__HAL__API.html" title="ACE Hardware and Platform Abstraction Interfaces. " alt="" coords="5,13,116,39"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__ACE__HAL__POWER__DS"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__POWER__DS.html">Data Structures and Enums</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac6bc982966c2a28b5c384b3bdf61d4d6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__POWER.html#gac6bc982966c2a28b5c384b3bdf61d4d6">acePwrHal_init</a> (void)</td></tr>
<tr class="memdesc:gac6bc982966c2a28b5c384b3bdf61d4d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">This call can serve as HAL layer code to initialize data structure and load default power configuration. For example, each HW power control mechanism will be different. In Linux, this HAL layer uses Linux Power Framework such as CPUFreq to configure default governor or hold lock. For RTOS, it may set default cpu frequency or PMIC setting to initialize default voltage on certain power domains of HW. Data structure and default configuration can be defined and initialized to meet the need from different OS and HW.  <a href="#gac6bc982966c2a28b5c384b3bdf61d4d6">More...</a><br /></td></tr>
<tr class="separator:gac6bc982966c2a28b5c384b3bdf61d4d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa96c6289c529811828a6b1d8112493d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__POWER.html#gaa96c6289c529811828a6b1d8112493d1">acePwrHal_powerDown</a> (bool restart, acePWR_shutdownReason_t reason, const char *desc)</td></tr>
<tr class="memdesc:gaa96c6289c529811828a6b1d8112493d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API is to require power down of the device.  <a href="#gaa96c6289c529811828a6b1d8112493d1">More...</a><br /></td></tr>
<tr class="separator:gaa96c6289c529811828a6b1d8112493d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac75c3bc7c99937fc7f506096474c4ea4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__POWER.html#gac75c3bc7c99937fc7f506096474c4ea4">acePwrHal_setPolicy</a> (const <a class="el" href="group__ACE__HAL__POWER__DS.html#gadde769a8e25c97112086ee79ce77b007">acePwrHal_policyType_t</a> type, const void *data)</td></tr>
<tr class="memdesc:gac75c3bc7c99937fc7f506096474c4ea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API is to require HAL layer to set a different policy based on support on each HW. Most device has three power states: Active (busy), Standby(background periodical active), Idle(sleep). Each state has different power requirements.  <a href="#gac75c3bc7c99937fc7f506096474c4ea4">More...</a><br /></td></tr>
<tr class="separator:gac75c3bc7c99937fc7f506096474c4ea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga61fa9904d0151444f3c917cc58b165c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__POWER.html#ga61fa9904d0151444f3c917cc58b165c2">acePowerHalRegisterCallback</a> (const <a class="el" href="group__ACE__HAL__POWER__DS.html#ga0b063cfdc8618f0ee744657aa8b710b5">acePowerHalCallback_t</a> callback)</td></tr>
<tr class="memdesc:ga61fa9904d0151444f3c917cc58b165c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register Callback function.  <a href="#ga61fa9904d0151444f3c917cc58b165c2">More...</a><br /></td></tr>
<tr class="separator:ga61fa9904d0151444f3c917cc58b165c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>HAL API for low level power management. </p>
<p>Power HAL APIs provide an interface between Power MW and Power HAL. By using Power HAL APIs, the middleware power service can control the power state of the device through Power HAL. The power states include ACTIVE, STANDBY, SUSPEND, and POWER DOWN. </p><div class="image">
<img src="ACE_PowerService.png" alt="ACE_PowerService.png" width="12px"/>
<div class="caption">
Power Service</div></div>
 <h2 class="groupheader">Function Documentation</h2>
<a id="ga61fa9904d0151444f3c917cc58b165c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga61fa9904d0151444f3c917cc58b165c2">&#9670;&nbsp;</a></span>acePowerHalRegisterCallback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> acePowerHalRegisterCallback </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__ACE__HAL__POWER__DS.html#ga0b063cfdc8618f0ee744657aa8b710b5">acePowerHalCallback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register Callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>callback function</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ACE_STATUS_OK for success, other value for failure </dd></dl>

</div>
</div>
<a id="gac6bc982966c2a28b5c384b3bdf61d4d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6bc982966c2a28b5c384b3bdf61d4d6">&#9670;&nbsp;</a></span>acePwrHal_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> acePwrHal_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This call can serve as HAL layer code to initialize data structure and load default power configuration. For example, each HW power control mechanism will be different. In Linux, this HAL layer uses Linux Power Framework such as CPUFreq to configure default governor or hold lock. For RTOS, it may set default cpu frequency or PMIC setting to initialize default voltage on certain power domains of HW. Data structure and default configuration can be defined and initialized to meet the need from different OS and HW. </p>
<dl class="section return"><dt>Returns</dt><dd>ACE_STATUS_OK for success. Other value for failure. </dd></dl>

</div>
</div>
<a id="gaa96c6289c529811828a6b1d8112493d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa96c6289c529811828a6b1d8112493d1">&#9670;&nbsp;</a></span>acePwrHal_powerDown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> acePwrHal_powerDown </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>restart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">acePWR_shutdownReason_t&#160;</td>
          <td class="paramname"><em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>desc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API is to require power down of the device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">restart</td><td>true for reboot false for shutdown. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reason</td><td>reboot or shutdown reason </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">desc</td><td>description in string format and size is limited to ACE_PWR_STR_BUFFER_SIZE i.e., WiFi or OTA</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ACE_STATUS_OK for success. Other value for failure. </dd></dl>

</div>
</div>
<a id="gac75c3bc7c99937fc7f506096474c4ea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac75c3bc7c99937fc7f506096474c4ea4">&#9670;&nbsp;</a></span>acePwrHal_setPolicy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> acePwrHal_setPolicy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__ACE__HAL__POWER__DS.html#gadde769a8e25c97112086ee79ce77b007">acePwrHal_policyType_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API is to require HAL layer to set a different policy based on support on each HW. Most device has three power states: Active (busy), Standby(background periodical active), Idle(sleep). Each state has different power requirements. </p>
<p>For ACTIVE policy, it will map to API level: ACTIVE-HIGH, ACTIVE-MED, ACTIVE-LOW parameters (see parameters) with the same policy type, but different Value (use parameter - data) from 0 to 2 corresponding to LOW to HIGH active policy. The same rules apply to STANDBY-HIGH, MED, LOW as well. In Linux, for active high, it can adjust CpuFreq Governor to performance, and set different max frequency for high, med and low.</p>
<p>In RTOS, it can set different CPU frequencies to map ACTIVE-HIGH, MED, LOW.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>For different power policy type. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>indicate level or special data for each type.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ACE_STATUS_OK for success, other value for failure </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
