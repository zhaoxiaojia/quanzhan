<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACS: Over-the-air Updates</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ACS
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__ACE__HAL__OTA.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Over-the-air Updates<div class="ingroups"><a class="el" href="group__HAL.html">HAL</a> &raquo; <a class="el" href="group__HAL__API.html">API Definitions</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A set of APIs implemented by the platform that enable platform-specific download, validation, and installation.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Over-the-air Updates:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__ACE__HAL__OTA.png" border="0" alt="" usemap="#group____ACE____HAL____OTA"/>
<map name="group____ACE____HAL____OTA" id="group____ACE____HAL____OTA">
<area shape="rect" id="node2" href="group__HAL__API.html" title="ACE Hardware and Platform Abstraction Interfaces. " alt="" coords="5,5,116,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gad9249fc10c3d5b1246a38f2364d6a271"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__OTA.html#gad9249fc10c3d5b1246a38f2364d6a271">add_download_range</a>) (const void *update, size_t start, size_t size)</td></tr>
<tr class="memdesc:gad9249fc10c3d5b1246a38f2364d6a271"><td class="mdescLeft">&#160;</td><td class="mdescRight">A helper function provided by the ACE OTA MW that allows the platform to add download ranges (i.e. HTTP range requests).  <a href="#gad9249fc10c3d5b1246a38f2364d6a271">More...</a><br /></td></tr>
<tr class="separator:gad9249fc10c3d5b1246a38f2364d6a271"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf6df518e7715739c67b562f349d66762"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__OTA.html#gaf6df518e7715739c67b562f349d66762">aceOtaHal_on_sync_complete</a> (const void *updates)</td></tr>
<tr class="memdesc:gaf6df518e7715739c67b562f349d66762"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked by the ACE OTA client when it has successfully completed a sync with the configured service.  <a href="#gaf6df518e7715739c67b562f349d66762">More...</a><br /></td></tr>
<tr class="separator:gaf6df518e7715739c67b562f349d66762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga524c35d88f26660eec0cff7ecfd2e003"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__OTA.html#ga524c35d88f26660eec0cff7ecfd2e003">aceOtaHal_on_download_prepare</a> (const void *update, <a class="el" href="group__ACE__HAL__OTA.html#gad9249fc10c3d5b1246a38f2364d6a271">add_download_range</a> cb)</td></tr>
<tr class="memdesc:ga524c35d88f26660eec0cff7ecfd2e003"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked by the ACE OTA client prior to after syncing, but prior to beginning the download.  <a href="#ga524c35d88f26660eec0cff7ecfd2e003">More...</a><br /></td></tr>
<tr class="separator:ga524c35d88f26660eec0cff7ecfd2e003"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga531bbc2389eaab45b7c7651d47a4025f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__OTA.html#ga531bbc2389eaab45b7c7651d47a4025f">aceOtaHal_on_download_http_header</a> (const void *update, const char *header, size_t length)</td></tr>
<tr class="memdesc:ga531bbc2389eaab45b7c7651d47a4025f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked by the ACE OTA client for each HTTP header received during the download.  <a href="#ga531bbc2389eaab45b7c7651d47a4025f">More...</a><br /></td></tr>
<tr class="separator:ga531bbc2389eaab45b7c7651d47a4025f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae12f2c1c808f7d0b2b0fa69b722577e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__OTA.html#gaae12f2c1c808f7d0b2b0fa69b722577e">aceOtaHal_on_download_data</a> (const void *update, const uint8_t *data, size_t length, size_t offset)</td></tr>
<tr class="memdesc:gaae12f2c1c808f7d0b2b0fa69b722577e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked by the ACE OTA client for each chunk of data received during the download.  <a href="#gaae12f2c1c808f7d0b2b0fa69b722577e">More...</a><br /></td></tr>
<tr class="separator:gaae12f2c1c808f7d0b2b0fa69b722577e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga185a5d5c2f78288b5050b68e9e5b973f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__OTA.html#ga185a5d5c2f78288b5050b68e9e5b973f">aceOtaHal_on_download_complete</a> (const void *update, bool success)</td></tr>
<tr class="memdesc:ga185a5d5c2f78288b5050b68e9e5b973f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked by the ACE OTA client when the current download has finished, be it because the download has completed or the current sequence was aborted.  <a href="#ga185a5d5c2f78288b5050b68e9e5b973f">More...</a><br /></td></tr>
<tr class="separator:ga185a5d5c2f78288b5050b68e9e5b973f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gace2e53340ceb0e6d463904aa8ce881ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__OTA.html#gace2e53340ceb0e6d463904aa8ce881ad">aceOtaHal_validate</a> (const void *update)</td></tr>
<tr class="memdesc:gace2e53340ceb0e6d463904aa8ce881ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked by the ACE OTA client after the current download has successfully completed.  <a href="#gace2e53340ceb0e6d463904aa8ce881ad">More...</a><br /></td></tr>
<tr class="separator:gace2e53340ceb0e6d463904aa8ce881ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga267ead40e854b68bce5a2036f23a44a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ACE__HAL__OTA.html#ga267ead40e854b68bce5a2036f23a44a6">aceOtaHal_install</a> (const void *update)</td></tr>
<tr class="memdesc:ga267ead40e854b68bce5a2036f23a44a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked by the ACE OTA client after the downloaded image was successfully validated by the platform.  <a href="#ga267ead40e854b68bce5a2036f23a44a6">More...</a><br /></td></tr>
<tr class="separator:ga267ead40e854b68bce5a2036f23a44a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>A set of APIs implemented by the platform that enable platform-specific download, validation, and installation. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gad9249fc10c3d5b1246a38f2364d6a271"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad9249fc10c3d5b1246a38f2364d6a271">&#9670;&nbsp;</a></span>add_download_range</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a>(* add_download_range) (const void *update, size_t start, size_t size)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A helper function provided by the ACE OTA MW that allows the platform to add download ranges (i.e. HTTP range requests). </p>
<p>An example of where this may be useful is if the update contains two system images (say one for A, and one for B) packaged together, and the platform intends to only use one. The callback can then be invoked to specify the appropriate offset + range to start from in order to restrict the download to only the appropriate image.</p>
<p>Another example might be a "resume download" feature, provided by the platform. When aceOtaHal_on_download_prepare is invoked, the platform can check to see if it has a partially completed version of this package, and can add the appropriate download range to continue downloading where it left off.</p>
<p>Typically, this will be called from aceOtaHal_on_download_data, after parsing the relevant metadata from the package.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">update</td><td>Pointer to the current update; varies with OTA service. If an Amazon OTA service is used, this will be a pointer to an ota_available_update_t. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">start</td><td>A zero-based offset for the range. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>The number of bytes to download for this range; pass 0 to signal the end of the stream. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns zero on success, and a negative value otherwise. Failures shall result in the current OTA sequence being aborted. </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga267ead40e854b68bce5a2036f23a44a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga267ead40e854b68bce5a2036f23a44a6">&#9670;&nbsp;</a></span>aceOtaHal_install()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> aceOtaHal_install </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>update</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked by the ACE OTA client after the downloaded image was successfully validated by the platform. </p>
<p>The platform can use this to perform any final steps required to "activate" the new downloaded image, such as switching the active boot slot, or to trigger a recovery update sequence.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">update</td><td>Pointer to the current update; varies with OTA service. If an Amazon OTA service is used, this will be a pointer to an ota_available_update_t.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ACE_STATUS_OK or ACE_STATUS_IN_PROGRESS on success, and a different negative value otherwise. Failures shall result in the current OTA sequence being aborted. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ACE_STATUS_OK</td><td>The update was installed immediately. </td></tr>
    <tr><td class="paramname">ACE_STATUS_IN_PROGRESS</td><td>The update was installed, but requires a reboot to take effect. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga185a5d5c2f78288b5050b68e9e5b973f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga185a5d5c2f78288b5050b68e9e5b973f">&#9670;&nbsp;</a></span>aceOtaHal_on_download_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> aceOtaHal_on_download_complete </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>success</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked by the ACE OTA client when the current download has finished, be it because the download has completed or the current sequence was aborted. </p>
<p>The platform can use this to synchronize all of the previous writes if the download has succeeded, or release all relevant resources if it failed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">update</td><td>Pointer to the current update; varies with OTA service. If an Amazon OTA service is used, this will be a pointer to an ota_available_update_t. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">success</td><td>The status of the current download; true if it succeeded, false otherwise.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns zero on success, and a negative value otherwise. Failures shall result in the current OTA sequence being aborted. Note that if the client invokes this function with success equal to false, the current sequence will be aborted regardless. </dd></dl>

</div>
</div>
<a id="gaae12f2c1c808f7d0b2b0fa69b722577e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae12f2c1c808f7d0b2b0fa69b722577e">&#9670;&nbsp;</a></span>aceOtaHal_on_download_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> aceOtaHal_on_download_data </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked by the ACE OTA client for each chunk of data received during the download. </p>
<p>The client will always initially start downloading from an offset of zero, and continue until the end of package. If there is a need to download a specific range, after parsing the package meta-data for example (typically located at the beginning of a package), new download ranges can be appended by invoking the add_download_range callback provided during aceOtaHal_on_download_prepare.</p>
<p>When ACE_STATUS_OK is returned, the client will continue the current download, and thus continue to call aceOtaHal_on_download_data, until the end of current download range.</p>
<p>The platform can cancel the current download range downloading by returning ACE_STATUS_CANCELED. The client will then stop the current download range, and start downloading the the next available range. When there are no further download ranges available, the client will stop downloading and invoke aceOtaHal_on_download_complete.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">update</td><td>Pointer to the current update; varies with OTA service. If an Amazon OTA service is used, this will be a pointer to an ota_available_update_t. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to the current chunk of data received from the stream. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>The length of the data pointed to by the data pointer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>The current offset (zero-based) of the data pointed to by the data pointer, relative to the beginning of the download stream. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns zero on success, and a negative value otherwise. ACE_STATUS_CANCELED can be returned to cancel the current download range; other negative values will be treated as failures, and shall result in the current OTA sequence being aborted. </dd></dl>

</div>
</div>
<a id="ga531bbc2389eaab45b7c7651d47a4025f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga531bbc2389eaab45b7c7651d47a4025f">&#9670;&nbsp;</a></span>aceOtaHal_on_download_http_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> aceOtaHal_on_download_http_header </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked by the ACE OTA client for each HTTP header received during the download. </p>
<p>This can be used by the platform to extract any relevant metadata.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">update</td><td>Pointer to the current update; varies with OTA service. If an Amazon OTA service is used, this will be a pointer to an ota_available_update_t. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">header</td><td>Pointer to the current HTTP header being processed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>The length of the string pointed to by header. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns zero on success, and a negative value otherwise. Failures shall result in the current OTA sequence being aborted. </dd></dl>

</div>
</div>
<a id="ga524c35d88f26660eec0cff7ecfd2e003"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga524c35d88f26660eec0cff7ecfd2e003">&#9670;&nbsp;</a></span>aceOtaHal_on_download_prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> aceOtaHal_on_download_prepare </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>update</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ACE__HAL__OTA.html#gad9249fc10c3d5b1246a38f2364d6a271">add_download_range</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked by the ACE OTA client prior to after syncing, but prior to beginning the download. </p>
<p>This can be used by the platform to prepare for the download. For example, it might be used to prepare the file system.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">update</td><td>Pointer to the current update; varies with OTA service. If an Amazon OTA service is used, this will be a pointer to an ota_available_update_t. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">cb</td><td>A callback provided by the ACE OTA client used for adding download ranges to the session. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns zero on success, and a negative value otherwise. Failures shall result in the current OTA sequence being aborted.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The contents of the update data structure (as pointed to by the update pointer) will remain constant throughout the entire download sequence. For example, the same update structure will be provided during on_download_data.</dd>
<dd>
This will be invoked prior to any download-related network actions (establishing a TLS connection, for example). </dd></dl>

</div>
</div>
<a id="gaf6df518e7715739c67b562f349d66762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf6df518e7715739c67b562f349d66762">&#9670;&nbsp;</a></span>aceOtaHal_on_sync_complete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> aceOtaHal_on_sync_complete </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>updates</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked by the ACE OTA client when it has successfully completed a sync with the configured service. </p>
<p>This can be used by the platform to determine the validity of the list of available updates.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">updates</td><td>The list of available updates provided by the configured OTA service; this will be a meta-list that contains a size. If an Amazon OTA service is used, it is a pointer to an ota_updates_t. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns zero on success, and a negative value otherwise. Failures shall result in the current OTA sequence being aborted. </dd></dl>

</div>
</div>
<a id="gace2e53340ceb0e6d463904aa8ce881ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gace2e53340ceb0e6d463904aa8ce881ad">&#9670;&nbsp;</a></span>aceOtaHal_validate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ace__status_8h.html#aacd7ede39583d4c0553059d25ba05082">ace_status_t</a> aceOtaHal_validate </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>update</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invoked by the ACE OTA client after the current download has successfully completed. </p>
<p>The platform should use this to validate the integrity of the downloaded image. This can be something simple, such as using the MD5 provided by KOTA, or something more thorough.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">update</td><td>Pointer to the current update; varies with OTA service. If an Amazon OTA service is used, this will be a pointer to an ota_available_update_t. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns zero on success, and a negative value otherwise. Failures shall result in the current OTA sequence being aborted. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
</div>
</body>
</html>
